!function(j){"use strict";j(document).ready(function(){let t=j("body"),i=j("#addonify-wishlist-sticky-sidebar-container"),o=j("#addonify-wishlist-table"),{enabledMultiWishlist:d,ajax_url:e,nonce:s,addToWishlistAction:a,removeFromWishlistAction:n,emptyWishlistAction:l,removeFromWishlistAfterAddedToCart:r,removeAlreadyAddedProductFromWishlist:c}=addonifyWishlistJSObject,u,h,f,m,y,W;var b={loader:addonifyWishlistJSObject.loader,wishlistPageURL:addonifyWishlistJSObject.wishlistPageURL,saveForLaterButtonLabel:addonifyWishlistJSObject.saveForLaterButtonLabel,savedForLaterButtonLabel:addonifyWishlistJSObject.savedForLaterButtonLabel,initialAddToWishlistButtonLabel:addonifyWishlistJSObject.initialAddToWishlistButtonLabel,addedToWishlistButtonLabel:addonifyWishlistJSObject.addedToWishlistButtonLabel,alreadyInWishlistButtonLabel:addonifyWishlistJSObject.alreadyInWishlistButtonLabel,undoNoticeTimeout:addonifyWishlistJSObject.undoNoticeTimeout,addedToWishlistModal:addonifyWishlistJSObject.addedToWishlistModal,removedFromWishlistModal:addonifyWishlistJSObject.removedFromWishlistModal,afterAddToWishlistAction:addonifyWishlistJSObject.afterAddToWishlistAction,productRemovalUndoNotice:addonifyWishlistJSObject.productRemovalUndoNotice};let p=t.addonifyWishlistInit(b);function _(){j(document).trigger("addonify_adding_to_wishlist");var t={action:a,product_id:u,nonce:s};0<i.length&&(t.has_wishlist_sidebar=!0),0<o.length&&(t.has_wishlist_table=!0),j.post(e,t).done(function(t){1==t.success?(j(document).trigger("addonify_added_to_wishlist",[{productID:u,itemsCount:t.itemsCount,thisButton:f,modalContentUpdateData:g()}]),t.hasOwnProperty("sidebarProductRowContent")&&p.addWishlistSidebarProductRow(t.sidebarProductRowContent),t.hasOwnProperty("tableProductRowContent")&&p.addWishlistTableProductRow(t.tableProductRowContent)):(W=t.message,y="flash",p.displayModal(addonifyWishlistJSObject.errorModal,g()))}).always(function(){p.hideLoader()})}function w(){j(document).trigger("addonify_removing_from_wishlist"),j.post(e,{action:n,product_id:u,nonce:s}).done(function(t){t.success?j(document).trigger("addonify_removed_from_wishlist",[{productID:u,productName:h,itemsCount:t.itemsCount,thisButton:m,modalContentUpdateData:g()}]):(W=t.message,y="flash",p.displayModal(addonifyWishlistJSObject.errorRemovingFromWishlistModal,g()))}).always(function(){p.hideLoader()})}function v(t){u=t.data("product_id"),h=t.data("product_name")}function g(){return{product_name:h,modal_icon:y,modal_message:W}}p.init(),{init:function(){this.wishlistButtonEventHandler(),this.undoEventsHandler(),this.addedToCartEventHandler()},wishlistButtonEventHandler:function(){"1"!==d&&(t.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(t){t.preventDefault(),(f=jQuery(this)).addClass("loading"),v(f),f.hasClass("added-to-wishlist")?"1"===c?(m=f,w()):p.displayModal(addonifyWishlistJSObject.alreadyInWishlistModal,g()):_(),f.removeClass("loading")}),t.on("click",".addonify-wishlist-ajax-remove-from-wishlist",function(t){t.preventDefault(),v(m=j(this)),w()}),j(document).on("click","#addonify-wishlist__clear-all",function(t){t.preventDefault(),p.displayLoader(),j.post(e,{action:l,nonce:s}).done(function(t){t.success?(j(document).trigger("addonify_wishlist_emptied"),p.updateWishlistTableElements(0)):(W=t.message,y="flash",p.displayModal(addonifyWishlistJSObject.errorModal,g()))}).always(function(){p.hideLoader()})}))},undoEventsHandler:function(){"1"!==d&&t.on("click","#addonify-wishlist-undo-deleted-product-link",function(t){t.preventDefault(),f=j(this),_()})},addedToCartEventHandler:function(){"1"!==d&&j(document).on("added_to_cart",function(t,i,o,d){"1"===r&&(v(d),j(document).trigger("addonify_removed_from_wishlist",[{productID:d.data("product_id"),productName:d.data("product_name"),itemsCount:i.itemsCount,thisButton:d,modalContentUpdateData:g()}]))})}}.init()})}(jQuery);