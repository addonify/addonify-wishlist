!function(A){"use strict";A(document).ready(function(){let o=A("body"),i=(A("#addonify-wishlist-notice"),A("#addonify-wishlist-sticky-sidebar-container")),t=A("#addonify-wishlist-page-container"),s,{ajax_url:d,nonce:n,addedToWishlistText:e,initialAddToWishlistButtonLabel:a,addToWishlistAction:l,removeFromWishlistAction:r,emptyWishlistAction:c,removeFromWishlistAfterAddedToCart:h,removeAlreadyAddedProductFromWishlist:u,afterAddToWishlistAction:f,wishlistPageURL:w,undoNoticeTimeout:m,loader:y,addedToWishlistModal:p,alreadyInWishlistModal:_,errorAddingToWishlistModal:g,errorRemovingFromWishlistModal:C}=addonifyWishlistJSObject;function v(t,o){A(document).trigger("addonify_adding_to_wishlist"),A.post(d,t,function(i){1==i.success?("redirect_to_wishlist_page"===f&&o.hasClass("addonify-add-to-wishlist-btn")&&(window.location.href=w),A(document).trigger("addonify_added_to_wishlist",[{productID:t.product_id,itemsCount:i.itemsCount}]),"show_popup_notice"===f&&o.hasClass("addonify-add-to-wishlist-btn")&&O(p,i.productName),W(i,"added_to_wishlist")):i.hasOwnProperty("error")?("e1"===i.error&&console.log(i.message),"e2"===i.error&&O(_,i.productName)):O(g,i.productName)},"json").always(function(){k()})}function b(t){A(document).trigger("addonify_removing_from_wishlist"),A.post(d,t,function(i){i.success?(A(document).trigger("addonify_removed_from_wishlist",[{productID:t.product_id,itemsCount:i.itemsCount}]),W(i,"removed_from_wishlist")):i.hasOwnProperty("error")?"e1"===i.error&&console.log(i.message):O(C,i.productName)},"json").always(function(){k()})}function W(i,t){0<i.itemsCount&&A("#addonify-wishlist-show-sidebar-btn").removeClass("hidden"),i.hasOwnProperty("sidebarContent")&&A("#addonify-wishlist-sidebar-items-wrapper")&&A("#addonify-wishlist-sidebar-items-wrapper").html(i.sidebarContent),i.hasOwnProperty("tableContent")&&A("#addonify-wishlist-page-items-wrapper")&&A("#addonify-wishlist-page-items-wrapper").html(i.tableContent),"removed_from_wishlist"===t&&i.hasOwnProperty("undoContent")&&A("#addonify-wishlist-notice")&&(A("#addonify-wishlist-notice").html(i.undoContent),A(document).trigger("addonify_wishlist_undo_notice_set")),"added_to_wishlist"===t&&A("#addonify-wishlist-notice").html("")}function O(i,t){""!==t&&i.includes("{product_name}")&&(i=i.replace("{product_name}",t)),A("#addonify-wishlist-modal-wrapper").replaceWith(i),o.toggleClass("addonify-wishlist-modal-is-open")}function T(){i&&i.append(y),t&&t.append(y)}function k(){A("#addonify-wishlist_spinner")&&A("#addonify-wishlist_spinner").remove()}({init:function(){this.wishlistButtonEventHandler(),this.undoEventsHandler(),this.wishlistEventHandler(),this.toggleBackgroundOverlays(),this.addedToCartEventHandler()},wishlistButtonEventHandler:function(){addonifyWishlistJSObject.hasOwnProperty("enabledAWP")||o.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(i){i.preventDefault();i=jQuery(this);i.addClass("loading"),i.hasClass("added-to-wishlist")?"1"===u?b({action:r,product_id:i.data("product_id"),nonce:n}):O(_,i.data("product_name")):v({action:l,product_id:i.data("product_id"),nonce:n},i),i.removeClass("loading")}),o.on("click",".addonify-wishlist-ajax-remove-from-wishlist",function(i){i.preventDefault();i=A(this);b({action:r,product_id:i.data("product_id"),nonce:n})}),A(document).on("click","#addonify-wishlist__clear-all",function(){T(),A.post(d,{action:c,nonce:n},function(i){i.success?(i.hasOwnProperty("tableContent")&&A("#addonify-wishlist-page-items-wrapper")&&A("#addonify-wishlist-page-items-wrapper").html(i.tableContent),A(document).trigger("addonify_wishlist_emptied"),A("#addonify-wishlist-notice").html("")):alert(i.message)}).always(function(){k()})})},undoEventsHandler:function(){o.on("click","#addonify-wishlist-undo-deleted-product-link",function(i){i.preventDefault();i=A(this);v({action:l,product_id:i.data("product_id"),nonce:n,source:i.data("source")},i)}),A(document).on("addonify_wishlist_undo_notice_set",function(i){clearTimeout(s),0<parseInt(m)&&(s=setTimeout(function(){A("#addonify-wishlist-notice").html("")},1e3*parseInt(m)))})},wishlistEventHandler:function(){A(document).on("addonify_adding_to_wishlist, addonify_removing_from_wishlist",function(i){T()}),A(document).on("addonify_added_to_wishlist",function(i,t){t.hasOwnProperty("productID")&&0<(t=A("button[data-product_id="+t.productID+"]")).length&&t.each(function(){var i=A(this);i.hasClass("added-to-wishlist")||i.addClass("added-to-wishlist"),!i.hasClass("addonify-custom-wishlist-btn")&&i.hasClass("addonify-add-to-wishlist-btn")&&(i.find("span.addonify-wishlist-btn-label").text(e),i.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"))}),k()}),A(document).on("addonify_removed_from_wishlist",function(i,t){t.hasOwnProperty("productID")&&0<(t=A("[data-product_id="+t.productID+"]")).length&&t.each(function(){var i=A(this);i.hasClass("added-to-wishlist")&&i.removeClass("added-to-wishlist"),!i.hasClass("addonify-custom-wishlist-btn")&&i.hasClass("addonify-add-to-wishlist-btn")&&(i.find("span.addonify-wishlist-btn-label").text(a),i.find("i.icon.adfy-wishlist-icon").addClass("heart-o-style-one").removeClass("heart-style-one"))}),k()})},toggleBackgroundOverlays:function(){o.on("click","#addonify-wishlist-close-modal-btn, #addonify-wishlist-modal-overlay",function(){o.toggleClass("addonify-wishlist-modal-is-open")}),o.on("click","#addonify-wishlist-show-sidebar-btn, #close-adfy-wishlist-sidebar-button, #addonify-wishlist-sticky-sidebar-overlay",function(){o.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")})},addedToCartEventHandler:function(){A(document).on("added_to_cart",function(i,t,o,s){W(t),"1"===h&&A(document).trigger("addonify_removed_from_wishlist",[{productID:s.data("product_id"),itemsCount:t.itemsCount}])})}}).init()})}(jQuery);