!function(w){"use strict";w(document).ready(function(){let a=w("body"),e=w("#addonify-wishlist-modal-response"),n=w("ul.adfy-wishlist-sidebar-items-entry"),l=addonifyWishlistJSObject.isLoggedIn,r,c='<div id="addonify-wishlist_spinner"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 11h5v2H2zm15 0h5v2h-5zm-6 6h2v5h-2zm0-15h2v5h-2zM4.222 5.636l1.414-1.414 3.536 3.536-1.414 1.414zm15.556 12.728-1.414 1.414-3.536-3.536 1.414-1.414zm-12.02-3.536 1.414 1.414-3.536 3.536-1.414-1.414zm7.07-7.071 3.536-3.535 1.414 1.415-3.536 3.535z"></path></svg></div>';function s(o){let n=parseInt(o.val()?o.val():o.data("product_id")),l=parseInt(o.data("wishlist_id"));var i={action:"addonify_remove_from_wishlist",productId:n,wishlistId:l,nonce:addonifyWishlistJSObject.nonce};let t="";0<w("#addonify-wishlist-sticky-sidebar-container").length&&(t=w("#addonify-wishlist-sticky-sidebar-container").find('li[data-product_row="addonify-wishlist-sidebar-product-row-'+n+'"]')).addClass("loading"),0<w("#addonify-wishlist-table").length&&(t=w("#addonify-wishlist-table").find('tr[data-product_row="addonify-wishlist-table-product-row-'+n+'"]')).append(c),w.post(addonifyWishlistJSObject.ajax_url,i,function(d){if(d.success){w(document).trigger("addonify_removed_from_wishlist",[{productID:n,wishlistCount:d.wishlist_count}]),d.wishlist_count<=0&&(w("#addonify-wishlist-show-sidebar-btn").addClass("hidden"),w("#addonify-wishlist__clear-all").hide()),y(n),f(d.wishlist_count);{var[d,a,e=""]=[o.data("product_name"),n,l];clearTimeout(r);let i=addonifyWishlistJSObject.undoActionPrelabelText,t=(i=i.replace("{product_name}",d),addonifyWishlistJSObject.undoActionLabel),s=`
                <p id="addonify-wishlist-undo-deleted-product-text">
                    `+i+`
                    <a href="#" id="addonify-wishlist-undo-deleted-product-link" data-product_id="`+a+'" data-wishlist_id="'+e+'"> '+t+` </a>
                </p>`;w("#addonify-wishlist-undo-deleted-product").html(s),r=setTimeout(function(){w("#addonify-wishlist-undo-deleted-product").html("")},1e3*parseInt(addonifyWishlistJSObject.undoNoticeTimeout))}}},"json").always(function(){t&&t.remove()})}function h(i,t,s,d=!0){d?w(".addonify-view-wishlist-btn").css("display","block"):w(".addonify-view-wishlist-btn").css("display","none"),w(".adfy-wishlist-icon-entry .adfy-wishlist-icon").hide(),s&&w(".adfy-wishlist-icon-entry .adfy-wishlist-icon.adfy-status-"+s).show(),e.html("<p class='response-text'>"+i.replace("{product_name}",t)+"</p>"),a.addClass("addonify-wishlist-modal-is-open")}function f(i){var t=w("#addonify-wishlist-sticky-sidebar-container"),s=w("#addonify-wishlist-sticky-sidebar-container #addonify-empty-wishlist-para"),d=w("#addonify-wishlist-table"),a=w("#addonify-wishlist-empty");if(a.html(""),0<i)0<d.length&&d.show(),0<s.length&&s.remove();else if(0<t.length&&w("#addonify-wishlist-sticky-sidebar-container ul.adfy-wishlist-sidebar-items-entry").html('<p id="addonify-empty-wishlist-para">'+addonifyWishlistJSObject.sidebarEmptyWishlistText+"</p>"),w("#addonify-wishlist-page-form")){d.hide();let i="";addonifyWishlistJSObject.showPageLinkLabel&&(i="<a href='"+addonifyWishlistJSObject.pageLink+"'>"+addonifyWishlistJSObject.pageLinkLabel+"</a>"),a.html(`
                        <p id="addonify-empty-wishlist-para">`+addonifyWishlistJSObject.emptyWishlistText+i+`</p>
                    `)}}function y(i){i=w('[data-product_id="'+i+'"].addonify-add-to-wishlist-btn');i&&!i.hasClass("addonify-custom-wishlist-btn")&&(i.removeClass("added-to-wishlist"),i.find("span.addonify-wishlist-btn-label").text(addonifyWishlistJSObject.initialAddToWishlistButtonLabel),i.find("i.icon.adfy-wishlist-icon").removeClass("heart-style-one").addClass("heart-o-style-one")),w(".woocommerce-notices-wrapper")&&w(".woocommerce-notices-wrapper").remove()}w(".addonify-add-to-wishlist-btn button.added-to-wishlist").attr("disabled",!0),a.on("click",".addonify-wishlist-login-popup-enabled",function(i){i.preventDefault(),h(addonifyWishlistJSObject.loginMessage,"","error")}),a.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(i){i.preventDefault();var t,i=w(this);i.hasClass("added-to-wishlist")?addonifyWishlistJSObject.removeAlreadyAddedProductFromWishlist?s(i):h(addonifyWishlistJSObject.popupAlreadyInWishlistText,i.data("product_name")):(t=i,i={action:addonifyWishlistJSObject.addToWishlistAction,id:t.data("product_id"),wishlist_id:t.data("wishlist_id"),nonce:addonifyWishlistJSObject.nonce},t.addClass("loading"),w.post(addonifyWishlistJSObject.ajax_url,i,function(i){1==i.success?(w(document).trigger("addonify_added_to_wishlist",[{productID:t.data("product_id"),wishlistCount:i.wishlist_count,sidebarData:i.sidebar_data}]),f(i.wishlist_count),t.addClass("added-to-wishlist"),"none"!==addonifyWishlistJSObject.afterAddToWishlistAction&&h(i.message,t.data("product_name"),"success"),0<i.wishlist_count&&(w("#addonify-wishlist-show-sidebar-btn").removeClass("hidden"),w("#addonify-wishlist__clear-all").show()),i.sidebar_data&&n.append(i.sidebar_data),t.hasClass("addonify-custom-wishlist-btn")||(t.find("span.addonify-wishlist-btn-label").text(addonifyWishlistJSObject.addedToWishlistText),t.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"))):h(i.message,t.data("product_name"),"error")},"json").always(function(){t.removeClass("loading")}))}),a.on("click","#addonify-wishlist-close-modal-btn",function(){a.removeClass("addonify-wishlist-modal-is-open")}),a.on("click","#addonify-wishlist-sticky-sidebar-overlay",function(){a.removeClass("addonify-wishlist-sticky-sidebar-is-visible")}),a.on("click","#addonify-wishlist-show-sidebar-btn, #close-adfy-wishlist-sidebar-button",function(){a.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")}),a.on("click",".addonify-wishlist-ajax-add-to-cart",function(i){i.preventDefault();let t=w(this);i={action:"addonify_add_to_cart_from_wishlist",productId:t.val(),nonce:addonifyWishlistJSObject.nonce};let s="";t.hasClass("addonify-wishlist-sidebar-button")&&(s=w("div#addonify-wishlist-sticky-sidebar-container").find('li[data-product_row="addonify-wishlist-sidebar-product-row-'+t.val()+'"]')),(s=t.hasClass("addonify-wishlist-table-button")?w("#addonify-wishlist-table").find('tr[data-product_row="addonify-wishlist-table-product-row-'+t.val()+'"]'):s)&&s.addClass("loading"),w.post(addonifyWishlistJSObject.ajax_url,i,function(i){i.success&&(w(document).trigger("addonify_added_to_cart",[{productID:t.data("product_id")}]),t.hasClass("addonify-wishlist-table-button")&&h("{product_name} added to cart",t.data("product_name"),"success"),"1"===addonifyWishlistJSObject.removeFromWishlistAfterAddedToCart)&&s&&(s.remove(),y(t.val()),l?f(i.wishlist_count):(-1<(i=getProductids()).indexOf(parseInt(t.val()))&&(i.splice(i.indexOf(parseInt(t.val())),1),setProductids(i)),f(i.length)))},"json"),s&&s.removeClass("loading")}),a.on("click","#addonify-wishlist-undo-deleted-product-link",function(i){i.preventDefault(),w("#addonify-wishlist-undo-deleted-product").html("");let s=w(this).data("product_id");i=w(this).data("wishlist_id");let d=w("button.addonify-add-to-wishlist-btn[data-product_id="+s+"]"),a=w("ul.adfy-wishlist-sidebar-items-entry"),e=w("#addonify-wishlist-table");if(w("#addonify-wishlist-sticky-sidebar-container").block({message:null}),w("#addonify-wishlist-page-container").append(c),l){var o={action:addonifyWishlistJSObject.addToWishlistAction,id:s,wishlist_id:i,nonce:addonifyWishlistJSObject.nonce};w.post(addonifyWishlistJSObject.ajax_url,o,function(i){1==i.success?(w(document).trigger("addonify_added_to_wishlist",[{productID:s,wishlistCount:i.wishlist_count,sidebarData:i.sidebar_data}]),f(i.wishlist_count),0<d.length&&(d.addClass("added-to-wishlist"),d.hasClass("addonify-custom-wishlist-btn")||(d.find("span.addonify-wishlist-btn-label").text(addonifyWishlistJSObject.addedToWishlistText),d.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"))),0<i.wishlist_count&&(w("#addonify-wishlist-show-sidebar-btn").removeClass("hidden"),w("#addonify-wishlist__clear-all").show()),i.sidebar_data&&n.prepend(i.sidebar_data),0<e.length&&i.table_row_data&&e.find("tbody").prepend(i.table_row_data)):h(i.message,d.data("product_name"),"error")},"json").always(function(){w("#addonify-wishlist_spinner").remove(),w("#addonify-wishlist-sticky-sidebar-container").unblock()})}else{o=getProductids();if(-1===o.indexOf(s))if(o.push(s),setProductids(o),"redirect_to_wishlist_page"===addonifyWishlistJSObject.afterAddToWishlistAction)window.location.href=addonifyWishlistJSObject.wishlistPageURL;else{let t="";w.post(addonifyWishlistJSObject.ajax_url,{action:addonifyWishlistJSObject.addToWishlistActionSideBar,id:s,wishlist_id:i,nonce:addonifyWishlistJSObject.nonce},function(i){i&&(a.prepend(i.sidebar_data),t=i.sidebar_data,0<e.length)&&i.table_row_data&&e.find("tbody").prepend(i.table_row_data)}).always(function(){w("#addonify-wishlist_spinner").remove(),w("#addonify-wishlist-sticky-sidebar-container").unblock()}),0<d.length&&(d.addClass("added-to-wishlist"),d.hasClass("addonify-custom-wishlist-btn")||(d.find("span.addonify-wishlist-btn-label").text(addonifyWishlistJSObject.addedToWishlistText),d.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"))),f(o.length),0<o.length&&(w("#addonify-wishlist-show-sidebar-btn").removeClass("hidden"),w("#addonify-wishlist__clear-all").show()),w(document).trigger("addonify_added_to_wishlist",[{productID:s,wishlistCount:o.length,sidebarData:t}])}else w("#addonify-wishlist_spinner").remove(),w("#addonify-wishlist-sticky-sidebar-container").unblock(),addonifyWishlistJSObject.removeAlreadyAddedProductFromWishlist&&addonifyLocalRemoveFromWishlist(d)}}),a.on("click",".addonify-wishlist-ajax-remove-from-wishlist",function(i){i.preventDefault(),s(w(this))}),w(document).on("added_to_cart",function(i,t,s,d){var a=d.data("product_id");let e="";var o=(e=0<w("#addonify-wishlist-table").length?w("#addonify-wishlist-table").find('tr[data-product_row="addonify-wishlist-table-product-row-'+a+'"]'):w("div#addonify-wishlist-sticky-sidebar-container").find('li[data-product_row="addonify-wishlist-sidebar-product-row-'+a+'"]')).siblings().length;"1"===addonifyWishlistJSObject.removeFromWishlistAfterAddedToCart&&0<e.length&&(0<e.length&&e.remove(),y(a),f(o),w(document).trigger("addonify_removed_from_wishlist",[{productID:a,wishlist_count:getProductids().length}])),d.parent().hasClass("addonify-wishlist-table-button")&&h("{product_name} added to cart",e.data("product_name"),!1,!1)}),w(document).on("click","#addonify-wishlist__clear-all",function(){var i={action:addonifyWishlistJSObject.emptyWishlistAction,nonce:addonifyWishlistJSObject.nonce};w("#addonify-wishlist-table").append(c),w.post(addonifyWishlistJSObject.ajax_url,i,function(i){i.success?(f(0),h(i.message,"","success",!1),w("#addonify-wishlist__clear-all").hide(),w(document).trigger("addonify_wishlist_emptied")):h(i.message,"","failure",!1)}).always(function(){w("#addonify-wishlist-table #addonify-wishlist_spinner").remove()})})})}(jQuery);