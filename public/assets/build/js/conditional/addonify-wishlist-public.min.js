!function(P){"use strict";P(document).ready(function(){let o=P("body"),s=P("#addonify-wishlist-notice"),t=P("#addonify-wishlist-sticky-sidebar-container"),i=P("#addonify-wishlist-page-container"),n,{ajax_url:d,nonce:e,addedToWishlistText:a,initialAddToWishlistButtonLabel:r,addToWishlistAction:l,removeFromWishlistAction:c,emptyWishlistAction:h,removeFromWishlistAfterAddedToCart:u,removeAlreadyAddedProductFromWishlist:f,afterAddToWishlistAction:w,wishlistPageURL:m,undoNoticeTimeout:p,loader:y,addedToWishlistModal:_,alreadyInWishlistModal:g,errorAddingToWishlistModal:b,errorRemovingFromWishlistModal:v}=addonifyWishlistJSObject;function C(i,o){P(document).trigger("addonify_adding_to_wishlist"),P.post(d,i,function(t){1==t.success?("redirect_to_wishlist_page"===w&&o.hasClass("addonify-add-to-wishlist-btn")&&(window.location.href=m),P(document).trigger("addonify_added_to_wishlist",[{productID:i.product_id,itemsCount:t.itemsCount}]),"show_popup_notice"===w&&o.hasClass("addonify-add-to-wishlist-btn")&&T(_,t.productName),O(t,"added_to_wishlist")):t.hasOwnProperty("error")?("e1"===t.error&&console.log(t.message),"e2"===t.error&&T(g,t.productName)):T(b,t.productName)},"json").always(function(){A()})}function W(i){P(document).trigger("addonify_removing_from_wishlist"),P.post(d,i,function(t){t.success?(P(document).trigger("addonify_removed_from_wishlist",[{productID:i.product_id,itemsCount:t.itemsCount}]),O(t,"removed_from_wishlist")):t.hasOwnProperty("error")?"e1"===t.error&&console.log(t.message):T(v,t.productName)},"json").always(function(){A()})}function O(t,i){0<t.itemsCount&&P("#addonify-wishlist-show-sidebar-btn").removeClass("hidden"),t.hasOwnProperty("sidebarContent")&&P("#addonify-wishlist-sidebar-items-wrapper")&&P("#addonify-wishlist-sidebar-items-wrapper").html(t.sidebarContent),t.hasOwnProperty("tableContent")&&P("#addonify-wishlist-page-items-wrapper")&&P("#addonify-wishlist-page-items-wrapper").html(t.tableContent),"removed_from_wishlist"===i&&t.hasOwnProperty("undoContent")&&s&&(s.html(t.undoContent),P(document).trigger("addonify_wishlist_undo_notice_set")),"added_to_wishlist"===i&&s.html("")}function T(t,i){""!==i&&t.includes("{product_name}")&&(t=t.replace("{product_name}",i)),P("#addonify-wishlist-modal-wrapper").replaceWith(t),o.toggleClass("addonify-wishlist-modal-is-open")}function k(){t&&t.append(y),i&&i.append(y)}function A(){P("#addonify-wishlist_spinner")&&P("#addonify-wishlist_spinner").remove()}({init:function(){this.wishlistButtonEventHandler(),this.undoEventsHandler(),this.wishlistEventHandler(),this.toggleBackgroundOverlays(),this.addedToCartEventHandler()},wishlistButtonEventHandler:function(){addonifyWishlistJSObject.hasOwnProperty("enabledAWP")||o.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(t){t.preventDefault();t=jQuery(this);t.addClass("loading"),t.hasClass("added-to-wishlist")?"1"===f?W({action:c,product_id:t.data("product_id"),nonce:e}):T(g,t.data("product_name")):C({action:l,product_id:t.data("product_id"),nonce:e,source:"wishlist-sidebar"},t),t.removeClass("loading")}),o.on("click",".addonify-wishlist-ajax-remove-from-wishlist",function(t){t.preventDefault();t=P(this);W({action:c,product_id:t.data("product_id"),nonce:e,source:t.data("source")})}),P(document).on("click","#addonify-wishlist__clear-all",function(){k(),P.post(d,{action:h,nonce:e},function(t){t.success?(t.hasOwnProperty("tableContent")&&P("#addonify-wishlist-page-items-wrapper")&&P("#addonify-wishlist-page-items-wrapper").html(t.tableContent),P(document).trigger("addonify_wishlist_emptied")):alert(t.message)}).always(function(){A()})})},undoEventsHandler:function(){o.on("click","#addonify-wishlist-undo-deleted-product-link",function(t){t.preventDefault();t=P(this);C({action:l,product_id:t.data("product_id"),nonce:e,source:t.data("source")},t)}),P(document).on("addonify_wishlist_undo_notice_set",function(t){clearTimeout(n),0<parseInt(p)&&(n=setTimeout(function(){s.html("")},1e3*parseInt(p)))})},wishlistEventHandler:function(){P(document).on("addonify_adding_to_wishlist, addonify_removing_from_wishlist",function(t){k()}),P(document).on("addonify_added_to_wishlist",function(t,i){i.hasOwnProperty("productID")&&0<(i=P("button[data-product_id="+i.productID+"]")).length&&i.each(function(){var t=P(this);!t.hasClass("addonify-custom-wishlist-btn")&&t.hasClass("addonify-add-to-wishlist-btn")&&(t.find("span.addonify-wishlist-btn-label").text(a),t.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"))}),A()}),P(document).on("addonify_removed_from_wishlist",function(t,i){i.hasOwnProperty("productID")&&0<(i=P("[data-product_id="+i.productID+"]")).length&&i.each(function(){var t=P(this);!t.hasClass("addonify-custom-wishlist-btn")&&t.hasClass("addonify-add-to-wishlist-btn")&&(t.find("span.addonify-wishlist-btn-label").text(r),t.find("i.icon.adfy-wishlist-icon").addClass("heart-o-style-one").removeClass("heart-style-one"))}),A()})},toggleBackgroundOverlays:function(){o.on("click","#addonify-wishlist-close-modal-btn, #addonify-wishlist-modal-overlay",function(){o.toggleClass("addonify-wishlist-modal-is-open")}),o.on("click","#addonify-wishlist-show-sidebar-btn, #close-adfy-wishlist-sidebar-button, #addonify-wishlist-sticky-sidebar-overlay",function(){o.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")})},addedToCartEventHandler:function(){P(document).on("added_to_cart",function(t,i,o,s){O(i),"1"===u&&P(document).trigger("addonify_removed_from_wishlist",[{productID:s.data("product_id"),itemsCount:i.itemsCount}])})}}).init()})}(jQuery);