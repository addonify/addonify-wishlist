!function(et){"use strict";et(document).ready(function(){const t=et("body"),i="addonify-wishlist",s=et("#addonify-wishlist-sticky-sidebar-container"),e=et("#addonify-wishlist-table"),{enabledMultiWishlist:o,requireLogin:a,ajaxURL:d,nonce:n,removeAlreadyAddedProductFromWishlist:l,removeFromWishlistAfterAddedToCart:r,getGuestSidebarTableProductRowAction:B,getGuestWishlistContent:F,thisSiteUrl:h,isLoginRequired:E,ifNotLoginAction:N,loginURL:U,defaultWishlistName:k,successModalClasses:u,alertModalClasses:c,errorModalClasses:f,addedToWishlistModalIcon:W,removedFromWishlistModalIcon:x,successModalIcon:q,alertModalIcon:H,errorModalIcon:m,loginRequiredModalIcon:G,addedToWishlistModalMessage:Q,alreadyInWishlistModalMessage:g,productRemovedFormWishlistModalMessage:z,wishlistEmptyingConfirmationModalMessage:K,wishlistEmptiedModalMessage:V,errorEmptyingWishlistModalMessage:X,loginRequiredModalMessage:Y,errorAddingProductToWishlistModalMessage:Z,errorRemovingProductFromWishlistModalMessage:$,wishlistLinkModalButton:p,loginLinkModalButton:tt,emptyWishlistConfirmModalButton:it}=addonifyWishlistJSObject;let y=0,w="",b="",v="",_="",D="",M="",P="",S="",L="";var st={loader:addonifyWishlistJSObject.loader,wishlistPageURL:addonifyWishlistJSObject.wishlistPageURL,saveForLaterButtonLabel:addonifyWishlistJSObject.saveForLaterButtonLabel,savedForLaterButtonLabel:addonifyWishlistJSObject.savedForLaterButtonLabel,initialAddToWishlistButtonLabel:addonifyWishlistJSObject.initialAddToWishlistButtonLabel,addedToWishlistButtonLabel:addonifyWishlistJSObject.addedToWishlistButtonLabel,alreadyInWishlistButtonLabel:addonifyWishlistJSObject.alreadyInWishlistButtonLabel,undoNoticeTimeout:addonifyWishlistJSObject.undoNoticeTimeout,addedToWishlistModal:addonifyWishlistJSObject.addedToWishlistModal,removedFromWishlistModal:addonifyWishlistJSObject.removedFromWishlistModal,afterAddToWishlistAction:addonifyWishlistJSObject.afterAddToWishlistAction,productRemovalUndoNotice:addonifyWishlistJSObject.productRemovalUndoNotice,modalTemplate:addonifyWishlistJSObject.modalTemplate};const C=t.addonifyWishlistInit(st),O=(C.init(),{setWishlistData:function(){localStorage.setItem(i+"_"+h+"_product_ids",JSON.stringify(v))},setDefaultWishlist:function(){var t;return v=this.getWishlistData(),b=this.getRawWishlistData(),0===v.length&&(t=new Date,t={id:0,name:k,visibility:"private",created_at:t.getTime(),product_ids:[]},v.push(t),this.setWishlistData(v),!!this.isWishlistDataSaved())&&t},getRawWishlistData:function(){return localStorage.getItem(i+"_"+h+"_product_ids")},getWishlistData:function(){var t=this.getRawWishlistData();if(null===t)return[];let i;try{i=JSON.parse(t)}catch(t){console.log(t.message)}return Array.isArray(i)?i:[]},isWishlistDataSaved:function(){return JSON.stringify(b)!==v},addToWishlist:function(t){t=parseInt(t),v=this.getWishlistData(),b=this.getRawWishlistData();var i=this.getProducts();return i.push(t),v[0].product_ids=i,this.setWishlistData(),!!this.isWishlistDataSaved()},removeFromWishlist:function(t){t=parseInt(t),v=this.getWishlistData(),b=this.getRawWishlistData();var i=this.getProducts(),t=i.indexOf(t);return-1!==t&&i.splice(t,1),v[0].product_ids=i,this.setWishlistData(),!!this.isWishlistDataSaved()},emptyWishlist:function(){return v=this.getWishlistData(),b=this.getRawWishlistData(),v[0].product_ids=[],this.setWishlistData(),!!this.isWishlistDataSaved()},isProductInWishlist:function(t){t=parseInt(t);let i=!1;var s=this.getProducts();return i=-1!==s.indexOf(t)?s.indexOf(t):i},getProductsCount:function(){return this.getProducts().length},getProducts:function(){var t=this.getWishlistData();return void 0!==t[0]?((t=t[0].product_ids).reverse(),t):[]}});function R(){if(et(document).trigger("addonify_adding_to_wishlist"),!1!==O.isProductInWishlist(y))"1"===l?(D=_,T()):(A(u,W,g,p),addonifyWishlistUpdateButton("already-in-wishlist",_));else if(O.addToWishlist(y),O.isWishlistDataSaved()){let i=O.getProductsCount();L=u,P=Q,M=W,S=p,et(document).trigger("addonify_added_to_wishlist",[{productID:y,itemsCount:i,thisButton:_,modalContentUpdateData:j()}]),J();var t={action:B,product_id:y,nonce:n};0<s.length&&(t.has_wishlist_sidebar=!0),0<e.length&&(t.has_wishlist_table=!0),et.post(d,t).done(function(t){t.success?(t.hasOwnProperty("sidebarProductRowContent")&&C.addWishlistSidebarProductRow(t.sidebarProductRowContent),t.hasOwnProperty("tableProductRowContent")&&C.addWishlistTableProductRow(t.tableProductRowContent),C.updateWishlistSidebarElements(i)):A(f,m,t.message)})}else A(f,m,Z);C.hideLoader()}function T(){var t;et(document).trigger("addonify_removing_from_wishlist"),!1!==O.isProductInWishlist(y)?(O.removeFromWishlist(y),O.isWishlistDataSaved()?(t=O.getProductsCount(),L=u,P=z,M=x,et(document).trigger("addonify_removed_from_wishlist",[{productID:y,productName:w,itemsCount:t,thisButton:D,modalContentUpdateData:j()}]),J()):A(f,m,$)):(A(u,W,g,p),addonifyWishlistUpdateButton("already-in-wishlist",D)),C.hideLoader()}function I(t){y=t.data("product_id"),w=t.data("product_name")}function j(){return{modal_icon:M,modal_message:P,modal_button:S,modal_container_classes:L,product_name:w}}function J(){S="",M="",L="",P=""}function A(t,i,s,e=""){L=t,M=i,P=s,S=e,C.displayModal(j()),J()}({init:function(){var t,i;null===O.getRawWishlistData()&&O.setDefaultWishlist(),"1"!==a&&"1"!==o&&(O.getProducts().forEach(function(t,i){t=et('.adfy-wishlist-btn[data-product_id="'+t+'"]');C.updateWishlistButtons(t,"already-in-wishlist")}),"1"!==o)&&(C.displayLoader(),t=O.getProducts(),i=O.getProductsCount(),(0<s.length||0<e.length)&&(t={action:F,product_ids:JSON.stringify(t),nonce:n},0<s.length&&(t.has_wishlist_sidebar=!0),0<e.length&&(t.has_wishlist_table=!0),et.post(d,t).done(function(t){t.success?(t.hasOwnProperty("sidebarContent")&&0<et("#addonify-wishlist-sidebar-items-wrapper").length&&et("#addonify-wishlist-sidebar-items-wrapper").html(t.sidebarContent),t.hasOwnProperty("tableContent")&&0<et("#addonify-wishlist-page-items-wrapper").length&&et("#addonify-wishlist-page-items-wrapper").html(t.tableContent)):A(f,m,t.message)}),C.updateWishlistSidebarElements(i),C.updateWishlistTableElements(i)),C.hideLoader()),this.onAddToWishlist(),this.onRemoveFromWishlist(),this.addedToCartEventHandler(),this.undoEventsHandler()},onAddToWishlist:function(){"1"!==o&&t.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(t){t.preventDefault(),"1"===E?"show_popup"===N?A(c,G,Y,tt):window.location.href=U:addonifyWishlistJSObject.hasOwnProperty("enabledAWP")||((_=et(this)).addClass("loading"),I(_),_.hasClass("added-to-wishlist")?"1"===l?(D=_,T()):A(u,W,g,p):R(),_.removeClass("loading"))})},onRemoveFromWishlist:function(){"1"!==o&&(et(document).on("click",".addonify-wishlist-ajax-remove-from-wishlist, .addonify-wishlist-remove-from-wishlist",function(t){t.preventDefault(),I(D=et(this)),T()}),et(document).on("click","#addonify-wishlist__clear-all",function(t){t.preventDefault(),A(c,H,K,it)}),et(document).on("click","#adfy-empty-wishlist-confirm-button",function(t){t.preventDefault(),C.displayLoader(),O.emptyWishlist()?(et(document).trigger("addonify_wishlist_emptied"),A(u,q,V)):A(f,m,X),C.hideLoader()}))},undoEventsHandler:function(){"1"!==o&&t.on("click","#addonify-wishlist-undo-deleted-product-link",function(t){t.preventDefault(),_=et(this),R()})},addedToCartEventHandler:function(){"1"!==o&&et(document).on("added_to_cart",function(t,i,s,e){y=e.data("product_id"),"1"===r&&!1!==O.isProductInWishlist(y)&&(I(D=e),T())})}}).init()})}(jQuery);