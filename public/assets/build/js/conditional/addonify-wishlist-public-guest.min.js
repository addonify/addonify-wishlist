!function(T){"use strict";T(document).ready(function(){let t=T("body"),i="addonify-wishlist",{enabledMultiWishlist:s,requireLogin:e,ajax_url:a,nonce:d,removeAlreadyAddedProductFromWishlist:o,removeFromWishlistAfterAddedToCart:n,getSidebarTableProductRowAction:l,getWishlistContent:r,thisSiteUrl:h,isLoginRequired:u,loginRequiredModal:c,ifNotLoginAction:f,loginURL:W}=addonifyWishlistJSObject,y,g,p,m,b,w,v,_,S=T("#addonify-wishlist-sticky-sidebar-container"),D=T("#addonify-wishlist-table");var O={loader:addonifyWishlistJSObject.loader,wishlistPageURL:addonifyWishlistJSObject.wishlistPageURL,saveForLaterButtonLabel:addonifyWishlistJSObject.saveForLaterButtonLabel,savedForLaterButtonLabel:addonifyWishlistJSObject.savedForLaterButtonLabel,initialAddToWishlistButtonLabel:addonifyWishlistJSObject.initialAddToWishlistButtonLabel,addedToWishlistButtonLabel:addonifyWishlistJSObject.addedToWishlistButtonLabel,alreadyInWishlistButtonLabel:addonifyWishlistJSObject.alreadyInWishlistButtonLabel,undoNoticeTimeout:addonifyWishlistJSObject.undoNoticeTimeout,addedToWishlistModal:addonifyWishlistJSObject.addedToWishlistModal,removedFromWishlistModal:addonifyWishlistJSObject.removedFromWishlistModal,afterAddToWishlistAction:addonifyWishlistJSObject.afterAddToWishlistAction,productRemovalUndoNotice:addonifyWishlistJSObject.productRemovalUndoNotice};let P=t.addonifyWishlistInit(O);P.init();const L={setWishlistData:function(){localStorage.setItem(i+"_"+h+"_product_ids",JSON.stringify(m))},setDefaultWishlist:function(){var t;return m=this.getWishlistData(),p=this.getRawWishlistData(),0===m.length&&(t={id:0,name:"Default Wishlist",visibility:"private",created_at:(new Date).getTime(),product_ids:[]},m.push(t),this.setWishlistData(m),!!this.isWishlistDataSaved())&&t},getRawWishlistData:function(){return localStorage.getItem(i+"_"+h+"_product_ids")},getWishlistData:function(){var t=this.getRawWishlistData();if(null===t)return[];let i;try{i=JSON.parse(t)}catch(t){console.log(t.message)}return Array.isArray(i)?i:[]},isWishlistDataSaved:function(){return JSON.stringify(p)!==m},addToWishlist:function(t){t=parseInt(t),m=this.getWishlistData(),p=this.getRawWishlistData();var i=this.getProducts();return i.push(t),m[0].product_ids=i,this.setWishlistData(),!!this.isWishlistDataSaved()},removeFromWishlist:function(t){t=parseInt(t),m=this.getWishlistData(),p=this.getRawWishlistData();var i=this.getProducts(),t=i.indexOf(t);return-1!==t&&i.splice(t,1),m[0].product_ids=i,this.setWishlistData(),!!this.isWishlistDataSaved()},emptyWishlist:function(){return m=this.getWishlistData(),p=this.getRawWishlistData(),m[0].product_ids=[],this.setWishlistData(),!!this.isWishlistDataSaved()},isProductInWishlist:function(t){t=parseInt(t);let i=!1;var s=this.getProducts();return i=-1!==s.indexOf(t)?s.indexOf(t):i},getProductsCount:function(){return this.getProducts().length},getProducts:function(){var t=this.getWishlistData();return void 0!==t[0]?((t=t[0].product_ids).reverse(),t):[]}};function j(){if(T(document).trigger("addonify_adding_to_wishlist"),!1!==L.isProductInWishlist(y))"1"===o?(w=b,J()):(P.displayModal(addonifyWishlistJSObject.alreadyInWishlistModal,R()),addonifyWishlistUpdateButton("already-in-wishlist",b));else if(L.addToWishlist(y),L.isWishlistDataSaved()){let i=L.getProductsCount();T(document).trigger("addonify_added_to_wishlist",[{productID:y,itemsCount:i,thisButton:b,modalContentUpdateData:R()}]);var t={action:l,product_id:y,nonce:d};0<S.length&&(t.has_wishlist_sidebar=!0),0<D.length&&(t.has_wishlist_table=!0),T.post(a,t).done(function(t){t.success?(t.hasOwnProperty("sidebarProductRowContent")&&P.addWishlistSidebarProductRow(t.sidebarProductRowContent),t.hasOwnProperty("tableProductRowContent")&&P.addWishlistTableProductRow(t.tableProductRowContent),P.updateWishlistSidebarElements(i)):(_=t.message,v="flash",P.displayModal(addonifyWishlistJSObject.errorModal,R()))})}else P.displayModal(addonifyWishlistJSObject.errorAddingToWishlistModal,R());P.hideLoader()}function J(){var t;T(document).trigger("addonify_removing_from_wishlist"),!1!==L.isProductInWishlist(y)?(L.removeFromWishlist(y),L.isWishlistDataSaved()?(t=L.getProductsCount(),T(document).trigger("addonify_removed_from_wishlist",[{productID:y,productName:g,itemsCount:t,thisButton:w,modalContentUpdateData:R()}])):(_=response.message,v="flash",P.displayModal(addonifyWishlistJSObject.errorRemovingFromWishlistModal,R()))):P.displayModal(addonifyWishlistJSObject.alreadyInWishlistModal,R()),P.hideLoader()}function C(t){y=t.data("product_id"),g=t.data("product_name")}function R(){return{product_name:g,modal_icon:v,modal_message:_}}({init:function(){var t,i;null===L.getRawWishlistData()&&L.setDefaultWishlist(),"1"!==e&&"1"!==s&&(L.getProducts().forEach(function(t,i){t=T('.adfy-wishlist-btn[data-product_id="'+t+'"]');P.updateWishlistButtons(t,"already-in-wishlist")}),"1"!==s)&&(P.displayLoader(),t=L.getProducts(),i=L.getProductsCount(),(0<S.length||0<D.length)&&(t={action:r,product_ids:JSON.stringify(t),nonce:d},0<S.length&&(t.has_wishlist_sidebar=!0),0<D.length&&(t.has_wishlist_table=!0),T.post(a,t).done(function(t){t.success?(t.hasOwnProperty("sidebarContent")&&0<T("#addonify-wishlist-sidebar-items-wrapper").length&&T("#addonify-wishlist-sidebar-items-wrapper").html(t.sidebarContent),t.hasOwnProperty("tableContent")&&0<T("#addonify-wishlist-page-items-wrapper").length&&T("#addonify-wishlist-page-items-wrapper").html(t.tableContent)):(_=t.message,v="flash",P.displayModal(addonifyWishlistJSObject.errorModal,R()))}),P.updateWishlistSidebarElements(i),P.updateWishlistTableElements(i)),P.hideLoader()),this.onAddToWishlist(),this.onRemoveFromWishlist(),this.addedToCartEventHandler(),this.undoEventsHandler()},onAddToWishlist:function(){"1"!==s&&t.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(t){if(t.preventDefault(),"1"===u)return"show_popup"===f?void addonifyWishlistDisplayModal(c):void(window.location.href=W);addonifyWishlistJSObject.hasOwnProperty("enabledAWP")||((b=T(this)).addClass("loading"),C(b),b.hasClass("added-to-wishlist")?"1"===o?(w=b,J()):(t=addonifyWishlistJSObject.alreadyInWishlistModal,t=addonifyWishlistUpdateProductNameInModal(t),addonifyWishlistDisplayModal(t)):j(),b.removeClass("loading"))})},onRemoveFromWishlist:function(){"1"!==s&&(T(document).on("click",".addonify-wishlist-ajax-remove-from-wishlist, .addonify-wishlist-remove-from-wishlist",function(t){t.preventDefault(),C(w=T(this)),J()}),T(document).on("click","#addonify-wishlist__clear-all",function(){P.displayLoader(),L.emptyWishlist()&&(T(document).trigger("addonify_wishlist_emptied"),P.updateWishlistTableElements(L.getProductsCount())),P.hideLoader()}))},undoEventsHandler:function(){"1"!==s&&t.on("click","#addonify-wishlist-undo-deleted-product-link",function(t){t.preventDefault(),b=T(this),j()})},addedToCartEventHandler:function(){"1"!==s&&T(document).on("added_to_cart",function(t,i,s,e){"1"===n&&(C(e),J())})}}).init()})}(jQuery);