!function(ot){"use strict";ot(document).ready(function(){const t=ot("body"),i="addonify-wishlist",s=ot("#addonify-wishlist-sticky-sidebar-container"),e=ot("#addonify-wishlist-table"),{enabledMultiWishlist:o,requireLogin:a,ajaxURL:d,nonce:n,removeAlreadyAddedProductFromWishlist:l,removeFromWishlistAfterAddedToCart:r,getGuestSidebarTableProductRowAction:h,getGuestWishlistContent:A,thisSiteUrl:u,isLoginRequired:F,ifNotLoginAction:E,loginURL:N,defaultWishlistName:U,successModalClasses:c,alertModalClasses:k,errorModalClasses:f,infoModalClasses:x,addedToWishlistModalIcon:W,removedFromWishlistModalIcon:q,successModalIcon:H,alertModalIcon:G,errorModalIcon:m,loginRequiredModalIcon:Q,addedToWishlistModalMessage:z,alreadyInWishlistModalMessage:g,productRemovedFormWishlistModalMessage:K,wishlistEmptyingConfirmationModalMessage:V,wishlistEmptiedModalMessage:X,errorEmptyingWishlistModalMessage:Y,loginRequiredModalMessage:Z,errorAddingProductToWishlistModalMessage:$,errorRemovingProductFromWishlistModalMessage:tt,wishlistLinkModalButton:p,loginLinkModalButton:it,emptyWishlistConfirmModalButton:st}=addonifyWishlistJSObject;let y=0,w="",b="",v="",_="",D="",M="",S="",P="",O="";var et={loader:addonifyWishlistJSObject.loader,wishlistPageURL:addonifyWishlistJSObject.wishlistPageURL,saveForLaterButtonLabel:addonifyWishlistJSObject.saveForLaterButtonLabel,savedForLaterButtonLabel:addonifyWishlistJSObject.savedForLaterButtonLabel,initialAddToWishlistButtonLabel:addonifyWishlistJSObject.initialAddToWishlistButtonLabel,addedToWishlistButtonLabel:addonifyWishlistJSObject.addedToWishlistButtonLabel,alreadyInWishlistButtonLabel:addonifyWishlistJSObject.alreadyInWishlistButtonLabel,addToWishlistButtonIcon:addonifyWishlistJSObject.addToWishlistButtonIcon,addedToWishlistButtonIcon:addonifyWishlistJSObject.addedToWishlistButtonIcon,loadingWishlistButtonIcon:addonifyWishlistJSObject.loadingWishlistButtonIcon,undoNoticeTimeout:addonifyWishlistJSObject.undoNoticeTimeout,addedToWishlistModal:addonifyWishlistJSObject.addedToWishlistModal,removedFromWishlistModal:addonifyWishlistJSObject.removedFromWishlistModal,afterAddToWishlistAction:addonifyWishlistJSObject.afterAddToWishlistAction,productRemovalUndoNotice:addonifyWishlistJSObject.productRemovalUndoNotice,modalTemplate:addonifyWishlistJSObject.modalTemplate};const T=t.addonifyWishlistInit(et),C=(T.init(),{setWishlistData:function(){localStorage.setItem(i+"_"+u+"_product_ids",JSON.stringify(v))},setDefaultWishlist:function(){var t;return v=this.getWishlistData(),b=this.getRawWishlistData(),0===v.length&&(t=new Date,t={id:0,name:U,visibility:"private",created_at:t.getTime(),product_ids:[]},v.push(t),this.setWishlistData(v),!!this.isWishlistDataSaved())&&t},getRawWishlistData:function(){return localStorage.getItem(i+"_"+u+"_product_ids")},getWishlistData:function(){var t=this.getRawWishlistData();if(null===t)return[];let i;try{i=JSON.parse(t)}catch(t){console.log(t.message)}return Array.isArray(i)?i:[]},isWishlistDataSaved:function(){return JSON.stringify(b)!==v},addToWishlist:function(t){t=parseInt(t),v=this.getWishlistData(),b=this.getRawWishlistData();var i=this.getProducts();return i.push(t),v[0].product_ids=i,this.setWishlistData(),!!this.isWishlistDataSaved()},removeFromWishlist:function(t){t=parseInt(t),v=this.getWishlistData(),b=this.getRawWishlistData();var i=this.getProducts(),t=i.indexOf(t);return-1!==t&&i.splice(t,1),v[0].product_ids=i,this.setWishlistData(),!!this.isWishlistDataSaved()},emptyWishlist:function(){return v=this.getWishlistData(),b=this.getRawWishlistData(),v[0].product_ids=[],this.setWishlistData(),!!this.isWishlistDataSaved()},isProductInWishlist:function(t){t=parseInt(t);let i=!1;var s=this.getProducts();return i=-1!==s.indexOf(t)?s.indexOf(t):i},getProductsCount:function(){return this.getProducts().length},getProducts:function(){var t=this.getWishlistData();return void 0!==t[0]?((t=t[0].product_ids).reverse(),t):[]}});function L(){if(ot(document).trigger("addonify_adding_to_wishlist",[{thisButton:_}]),!1!==C.isProductInWishlist(y))"1"===l?(D=_,I()):(J(c,W,g,p),addonifyWishlistUpdateButton("already-in-wishlist",_));else if(C.addToWishlist(y),C.isWishlistDataSaved()){let i=C.getProductsCount();O=c,S=z,M=W,P=p,ot(document).trigger("addonify_added_to_wishlist",[{productID:y,itemsCount:i,thisButton:_,modalContentUpdateData:B()}]),j();var t={action:h,product_id:y,nonce:n};0<s.length&&(t.has_wishlist_sidebar=!0),0<e.length&&(t.has_wishlist_table=!0),ot.post(d,t).done(function(t){t.success?(t.hasOwnProperty("sidebarProductRowContent")&&T.addWishlistSidebarProductRow(t.sidebarProductRowContent),t.hasOwnProperty("tableProductRowContent")&&T.addWishlistTableProductRow(t.tableProductRowContent),T.updateWishlistSidebarElements(i)):J(f,m,t.message)})}else J(f,m,$);T.hideLoader()}function I(){var t;ot(document).trigger("addonify_removing_from_wishlist",[{thisButton:D}]),!1!==C.isProductInWishlist(y)?(C.removeFromWishlist(y),C.isWishlistDataSaved()?(t=C.getProductsCount(),O=c,S=K,M=q,ot(document).trigger("addonify_removed_from_wishlist",[{productID:y,productName:w,itemsCount:t,thisButton:D,modalContentUpdateData:B()}]),j()):J(f,m,tt)):(J(c,W,g,p),addonifyWishlistUpdateButton("already-in-wishlist",D)),T.hideLoader()}function R(t){y=t.data("product_id"),w=t.data("product_name")}function B(){return{modal_icon:M,modal_message:S,modal_button:P,modal_container_classes:O,product_name:w}}function j(){P="",M="",O="",S=""}function J(t,i,s,e=""){O=t,M=i,S=s,P=e,T.displayModal(B()),j()}({init:function(){var t,i;null===C.getRawWishlistData()&&C.setDefaultWishlist(),"1"!==a&&"1"!==o&&(C.getProducts().forEach(function(t,i){t=ot('.adfy-wishlist-btn[data-product_id="'+t+'"]');T.updateWishlistButtons(t,"already-in-wishlist")}),"1"!==o)&&(T.displayLoader(),t=C.getProducts(),i=C.getProductsCount(),(0<s.length||0<e.length)&&(t={action:A,product_ids:JSON.stringify(t),nonce:n},0<s.length&&(t.has_wishlist_sidebar=!0),0<e.length&&(t.has_wishlist_table=!0),ot.post(d,t).done(function(t){t.success?(t.hasOwnProperty("sidebarContent")&&0<ot("#addonify-wishlist-sidebar-items-wrapper").length&&ot("#addonify-wishlist-sidebar-items-wrapper").html(t.sidebarContent),t.hasOwnProperty("tableContent")&&0<ot("#addonify-wishlist-page-items-wrapper").length&&ot("#addonify-wishlist-page-items-wrapper").html(t.tableContent)):J(f,m,t.message)}),T.updateWishlistSidebarElements(i),T.updateWishlistTableElements(i)),T.hideLoader()),this.onAddToWishlist(),this.onRemoveFromWishlist(),this.addedToCartEventHandler(),this.undoEventsHandler()},onAddToWishlist:function(){"1"!==o&&t.on("click",".addonify-wishlist-ajax-add-to-wishlist, .addonify-add-to-wishlist-btn",function(t){t.preventDefault(),"1"===F?"show_popup"===E?J(x,Q,Z,it):window.location.href=N:addonifyWishlistJSObject.hasOwnProperty("enabledAWP")||((_=ot(this)).addClass("loading"),R(_),_.hasClass("added-to-wishlist")?"1"===l?(D=_,I()):J(c,W,g,p):L(),_.removeClass("loading"))})},onRemoveFromWishlist:function(){"1"!==o&&(ot(document).on("click",".addonify-wishlist-ajax-remove-from-wishlist, .addonify-wishlist-remove-from-wishlist",function(t){t.preventDefault(),R(D=ot(this)),I()}),ot(document).on("click","#addonify-wishlist__clear-all",function(t){t.preventDefault(),J(k,G,V,st)}),ot(document).on("click","#adfy-empty-wishlist-confirm-button",function(t){t.preventDefault(),T.displayLoader(),C.emptyWishlist()?(ot(document).trigger("addonify_wishlist_emptied"),J(c,H,X)):J(f,m,Y),T.hideLoader()}))},undoEventsHandler:function(){"1"!==o&&t.on("click","#addonify-wishlist-undo-deleted-product-link",function(t){t.preventDefault(),_=ot(this),L()})},addedToCartEventHandler:function(){"1"!==o&&ot(document).on("added_to_cart",function(t,i,s,e){y=e.data("product_id"),"1"===r&&!1!==C.isProductInWishlist(y)&&(R(D=e),I())})}}).init()})}(jQuery);