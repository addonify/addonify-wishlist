!function(q){"use strict";q(document).ready(function(){let o=q("body"),i=q("#addonify-wishlist-notice"),s,n="addonify-wishlist",e="Default Wishlist",{requireLogin:t,addedToWishlistButtonLabel:d,ajax_url:a,nonce:r,removeAlreadyAddedProductFromWishlist:l,removeFromWishlistAfterAddedToCart:c,afterAddToWishlistAction:h,wishlistPageURL:f,initialWishlistContentGetAction:u,guestAddToWishlistAction:w,guestRemoveFromWishlistAction:p,addedToWishlistText:y,undoNoticeTimeout:m,initialAddToWishlistButtonLabel:_,thisSiteUrl:g,loader:v,addedToWishlistModal:H,alreadyInWishlistModal:L,errorAddingToWishlistModal:N,errorRemovingFromWishlistModal:b,isLoginRequired:F,loginRequiredModal:J,ifNotLoginAction:M,loginURL:B}=addonifyWishlistJSObject;function C(t){q(document).trigger("addonify_adding_to_wishlist");var o=parseInt(t.data("product_id")),i=T();if(-1===i.indexOf(o))if(i.push(o),!1!==A(i)){let i=T();"redirect_to_wishlist_page"===h&&t.hasClass("addonify-add-to-wishlist-btn")&&(window.location.href=f),q(document).trigger("addonify_added_to_wishlist",[{productID:o,itemsCount:i.length}]),"show_popup_notice"===h&&t.hasClass("addonify-add-to-wishlist-btn")&&x(H,t.data("product_name")),q.post(a,{action:w,product_ids:JSON.stringify(i),nonce:r},function(t){t.success?(t.itemsCount=i.length,E(t,"added_to_wishlist")):t.hasOwnProperty("error")&&"e1"===t.error&&console.log(t.message)})}else x(N,t.data("product_name"));else l&&W(t)}function O(){S();let i=T();q.post(a,{action:u,product_ids:JSON.stringify(i),nonce:r},function(t){t.success?(t.hasOwnProperty("tableContent")&&q("#addonify-wishlist-page-items-wrapper").html(t.tableContent),t.hasOwnProperty("sidebarContent")&&(q("#addonify-wishlist-sidebar-items-wrapper").html(t.sidebarContent),0<i.length)&&q("#addonify-wishlist-show-sidebar-btn").removeClass("hidden")):t.hasOwnProperty("error")&&"e1"===t.error&&console.log(t.message)}).always(function(){R()})}function W(t,i=""){q(document).trigger("addonify_removing_from_wishlist");var o=parseInt(t.val()?t.val():t.data("product_id"));let s=T();-1!==s.indexOf(o)?(s.splice(s.indexOf(o),1),!1!==A(s)?(s=T(),q.post(a,{action:p,product_ids:JSON.stringify(s),product_id:o,nonce:r},function(t){t.success?(t.itemsCount=s.length,E(t,"removed_from_wishlist",i)):t.hasOwnProperty("error")&&"e1"===t.error&&console.log(t.message)}),q(document).trigger("addonify_removed_from_wishlist",[{productID:o,itemsCount:s.length}])):x(b,t.data("product_name"))):(console.log("Hello"),x(b,t.data("product_name")))}function T(o=!1){o=o||e;let s=[],n=j(P(D("product_ids")));return n&&n.forEach(function(t,i){return"object"!=typeof t?(s=n,!1):t.name===o?(s=n[i].product_ids,!1):void 0}),s}function A(o,s=!1){s=s||e;let n=j(P(D("product_ids")));var t,i;n?(n.forEach(function(t,i){return"object"!=typeof t?(n=o,!1):t.name===s?(n[i].product_ids=o,!1):void 0}),I("product_ids",n)):(n=[],i=k(),t=(new Date).getTime(),i={id:i,name:s,visibility:"private",created_at:t,product_ids:o},n.push(i),I("product_ids",n),I("wishlist_id",k()+1))}function k(){var t=D("wishlist_id");return t?parseInt(t):0}function I(t,i){"object"==typeof i&&(i=JSON.stringify(i));var o=g;localStorage.setItem(n+"_"+o+"_"+t,i)}function P(t){let i;try{i=JSON.parse(t)}catch(t){return!1}return i}function D(t){var i=g;return localStorage.getItem(n+"_"+i+"_"+t)}function j(o){if(null===o||"object"!=typeof o)return!1;{let i=new Array;var t=Object.keys(o);return 0<t.length&&t.forEach(function(t){i[t]=o[t]}),i}}function E(t,i,o=""){0<t.itemsCount&&q("#addonify-wishlist-show-sidebar-btn").removeClass("hidden"),t.hasOwnProperty("sidebarContent")&&q("#addonify-wishlist-sidebar-items-wrapper")&&q("#addonify-wishlist-sidebar-items-wrapper").html(t.sidebarContent),t.hasOwnProperty("tableContent")&&q("#addonify-wishlist-page-items-wrapper")&&q("#addonify-wishlist-page-items-wrapper").html(t.tableContent),"removed_from_wishlist"===i&&""===o&&t.hasOwnProperty("undoContent")&&q("#addonify-wishlist-notice")&&(q("#addonify-wishlist-notice").html(t.undoContent),q(document).trigger("addonify_wishlist_undo_notice_set")),"added_to_wishlist"===i&&q("#addonify-wishlist-notice").html("")}function x(t,i){""!==i&&t.includes("{product_name}")&&(t=t.replace("{product_name}",i)),q("#addonify-wishlist-modal-wrapper").replaceWith(t),o.toggleClass("addonify-wishlist-modal-is-open")}function S(){0<q("#addonify-wishlist-sticky-sidebar-container").length&&q("#addonify-wishlist-sticky-sidebar-container").append(v),0<q("#addonify-wishlist-page-container").length&&q("#addonify-wishlist-page-container").append(v)}function R(){q("#addonify-wishlist_spinner")&&q("#addonify-wishlist_spinner").remove()}({init:function(){"1"!==t&&(T().forEach(function(t,i){t=q('.adfy-wishlist-btn[data-product_id="'+t+'"]');t.hasClass("addonify-custom-wishlist-btn")||(t.find("span").html(d),t.find("i").addClass("heart-style-one").removeClass("heart-o-style-one")),t.addClass("added-to-wishlist")}),O()),this.onAddToWishlist(),this.onRemoveFromWishlist(),this.addedToCartEventHandler(),this.toggleBackgroundOverlays(),this.wishlistEventHandler(),this.undoEventsHandler()},onAddToWishlist:function(){o.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(t){if(t.preventDefault(),"1"===F){if("show_popup"===M)return void x(J);window.location.href=B}t=q(this);t.hasClass("added-to-wishlist")?"1"===l?W(t):x(L,t.data("product_name")):C(t),q("#addonify-wishlist-notice").html("")})},onRemoveFromWishlist:function(){q(document).on("click",".addonify-wishlist-ajax-remove-from-wishlist, .addonify-wishlist-remove-from-wishlist",function(t){t.preventDefault(),W(q(this))}),q(document).on("click","#addonify-wishlist__clear-all",function(){S(),!1!==A([])&&(O(),q(document).trigger("addonify_wishlist_emptied")),R()})},wishlistEventHandler:function(){q(document).on("addonify_adding_to_wishlist, addonify_removing_from_wishlist",function(t){S()}),q(document).on("addonify_added_to_wishlist",function(t,i){i.hasOwnProperty("productID")&&0<(i=q("button[data-product_id="+i.productID+"]")).length&&i.each(function(){var t=q(this);t.hasClass("added-to-wishlist")||t.addClass("added-to-wishlist"),!t.hasClass("addonify-custom-wishlist-btn")&&t.hasClass("addonify-add-to-wishlist-btn")&&(t.find("span.addonify-wishlist-btn-label").text(y),t.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"))}),R()}),q(document).on("addonify_removed_from_wishlist",function(t,i){i.hasOwnProperty("productID")&&0<(i=q("[data-product_id="+i.productID+"]")).length&&i.each(function(){var t=q(this);t.hasClass("added-to-wishlist")&&t.removeClass("added-to-wishlist"),!t.hasClass("addonify-custom-wishlist-btn")&&t.hasClass("addonify-add-to-wishlist-btn")&&(t.find("span.addonify-wishlist-btn-label").text(_),t.find("i.icon.adfy-wishlist-icon").addClass("heart-o-style-one").removeClass("heart-style-one"))}),R()})},undoEventsHandler:function(){o.on("click","#addonify-wishlist-undo-deleted-product-link",function(t){t.preventDefault(),C(q(this))}),q(document).on("addonify_wishlist_undo_notice_set",function(t){clearTimeout(s),0<parseInt(m)&&(s=setTimeout(function(){i.html("")},1e3*parseInt(m)))})},addedToCartEventHandler:function(){q(document).on("added_to_cart",function(t,i,o,s){"1"===c&&W(s,"added-to-cart")})},toggleBackgroundOverlays:function(){o.on("click","#addonify-wishlist-close-modal-btn, #addonify-wishlist-modal-overlay",function(){o.toggleClass("addonify-wishlist-modal-is-open")}),o.on("click","#addonify-wishlist-show-sidebar-btn, #close-adfy-wishlist-sidebar-button, #addonify-wishlist-sticky-sidebar-overlay",function(){o.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")})}}).init()})}(jQuery);