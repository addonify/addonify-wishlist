!function(G){"use strict";G(document).ready(function(){let o=G("body"),t=G("#addonify-wishlist-notice"),i=G("#addonify-wishlist-sticky-sidebar-container"),s=G("#addonify-wishlist-page-container"),n,e="addonify-wishlist",d="Default Wishlist",{requireLogin:a,addedToWishlistButtonLabel:r,ajax_url:l,nonce:c,removeAlreadyAddedProductFromWishlist:h,removeFromWishlistAfterAddedToCart:f,afterAddToWishlistAction:u,wishlistPageURL:w,initialWishlistContentGetAction:y,guestAddToWishlistAction:p,guestRemoveFromWishlistAction:m,addedToWishlistText:H,undoNoticeTimeout:_,initialAddToWishlistButtonLabel:J,thisSiteUrl:g,loader:b,addedToWishlistModal:L,alreadyInWishlistModal:N,errorAddingToWishlistModal:F,errorRemovingFromWishlistModal:v,isLoginRequired:M,loginRequiredModal:B,ifNotLoginAction:q,loginURL:U}=addonifyWishlistJSObject;function C(i){G(document).trigger("addonify_adding_to_wishlist");var o=parseInt(i.data("product_id")),t=T();if(-1===t.indexOf(o))if(t.push(o),!1!==A(t)){let t=T();"redirect_to_wishlist_page"===u&&i.hasClass("addonify-add-to-wishlist-btn")&&(window.location.href=w),G(document).trigger("addonify_added_to_wishlist",[{productID:o,itemsCount:t.length}]),"show_popup_notice"===u&&i.hasClass("addonify-add-to-wishlist-btn")&&S(L,i.data("product_name")),G.post(l,{action:p,product_ids:JSON.stringify(t),nonce:c},function(i){i.success?(i.itemsCount=t.length,E(i,"added_to_wishlist")):i.hasOwnProperty("error")&&"e1"===i.error&&console.log(i.message)})}else S(F,i.data("product_name"));else h&&W(i)}function O(){let o=0<G("#addonify-wishlist-page-container").length?"wishlist-table":"";if(""!==(o=""===o&&0<G("#addonify-wishlist-sticky-sidebar-container").length?"wishlist-sidebar":o)){x();let t=T();G.post(l,{action:y,product_ids:JSON.stringify(t),nonce:c,source:o},function(i){console.log(i),i.success?("wishlist-table"===o&&i.hasOwnProperty("tableContent")&&G("#addonify-wishlist-page-items-wrapper").html(i.tableContent),"wishlist-sidebar"===o&&i.hasOwnProperty("sidebarContent")&&(G("#addonify-wishlist-sidebar-items-wrapper").html(i.sidebarContent),0<t.length)&&G("#addonify-wishlist-show-sidebar-btn").removeClass("hidden")):i.hasOwnProperty("error")&&"e1"===i.error&&console.log(i.message)}).always(function(){R()})}}function W(i){G(document).trigger("addonify_removing_from_wishlist");var t=parseInt(i.val()?i.val():i.data("product_id"));let o=T();-1!==o.indexOf(t)?(o.splice(o.indexOf(t),1),!1!==A(o)?(o=T(),G.post(l,{action:m,product_ids:JSON.stringify(o),product_id:t,nonce:c},function(i){console.log(i),i.success?(i.itemsCount=o.length,E(i,"removed_from_wishlist")):i.hasOwnProperty("error")&&"e1"===i.error&&console.log(i.message)}),G(document).trigger("addonify_removed_from_wishlist",[{productID:t,itemsCount:o.length}])):S(v,i.data("product_name"))):(console.log("Hello"),S(v,i.data("product_name")))}function T(o=!1){o=o||d;let s=[],n=D(P(j("product_ids")));return n&&n.forEach(function(i,t){return"object"!=typeof i?(s=n,!1):i.name===o?(s=n[t].product_ids,!1):void 0}),s}function A(o,s=!1){s=s||d;let n=D(P(j("product_ids")));var i,t;n?(n.forEach(function(i,t){return"object"!=typeof i?(n=o,!1):i.name===s?(n[t].product_ids=o,!1):void 0}),I("product_ids",n)):(n=[],t=k(),i=(new Date).getTime(),t={id:t,name:s,visibility:"private",created_at:i,product_ids:o},n.push(t),I("product_ids",n),I("wishlist_id",k()+1))}function k(){var i=j("wishlist_id");return i?parseInt(i):0}function I(i,t){"object"==typeof t&&(t=JSON.stringify(t));var o=g;localStorage.setItem(e+"_"+o+"_"+i,t)}function P(i){let t;try{t=JSON.parse(i)}catch(i){return!1}return t}function j(i){var t=g;return localStorage.getItem(e+"_"+t+"_"+i)}function D(o){if(null===o||"object"!=typeof o)return!1;{let t=new Array;var i=Object.keys(o);return 0<i.length&&i.forEach(function(i){t[i]=o[i]}),t}}function E(i,t){0<i.itemsCount&&G("#addonify-wishlist-show-sidebar-btn").removeClass("hidden"),i.hasOwnProperty("sidebarContent")&&G("#addonify-wishlist-sidebar-items-wrapper")&&G("#addonify-wishlist-sidebar-items-wrapper").html(i.sidebarContent),i.hasOwnProperty("tableContent")&&G("#addonify-wishlist-page-items-wrapper")&&G("#addonify-wishlist-page-items-wrapper").html(i.tableContent),"removed_from_wishlist"===t&&i.hasOwnProperty("undoContent")&&G("#addonify-wishlist-notice")&&(G("#addonify-wishlist-notice").html(i.undoContent),G(document).trigger("addonify_wishlist_undo_notice_set")),"added_to_wishlist"===t&&G("#addonify-wishlist-notice").html("")}function S(i,t){""!==t&&i.includes("{product_name}")&&(i=i.replace("{product_name}",t)),G("#addonify-wishlist-modal-wrapper").replaceWith(i),o.toggleClass("addonify-wishlist-modal-is-open")}function x(){i&&i.append(b),s&&s.append(b)}function R(){G("#addonify-wishlist_spinner")&&G("#addonify-wishlist_spinner").remove()}console.log(addonifyWishlistJSObject),{init:function(){"1"!==a&&(T().forEach(function(i,t){i=G('.adfy-wishlist-btn[data-product_id="'+i+'"]');i.hasClass("addonify-custom-wishlist-btn")||(i.find("span").html(r),i.find("i").addClass("heart-style-one").removeClass("heart-o-style-one")),i.addClass("added-to-wishlist")}),O()),this.onAddToWishlist(),this.onRemoveFromWishlist(),this.addedToCartEventHandler(),this.toggleBackgroundOverlays(),this.wishlistEventHandler(),this.undoEventsHandler()},onAddToWishlist:function(){o.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(i){if(i.preventDefault(),"1"===M){if("show_popup"===q)return void S(B);window.location.href=U}i=G(this);i.hasClass("added-to-wishlist")?"1"===h?W(i):S(N,i.data("product_name")):C(i),G("#addonify-wishlist-notice").html("")})},onRemoveFromWishlist:function(){G(document).on("click",".addonify-wishlist-ajax-remove-from-wishlist, .addonify-wishlist-remove-from-wishlist",function(i){i.preventDefault(),W(G(this))}),G(document).on("click","#addonify-wishlist__clear-all",function(){x(),!1!==A([])&&(O(),G(document).trigger("addonify_wishlist_emptied")),R()})},wishlistEventHandler:function(){G(document).on("addonify_adding_to_wishlist, addonify_removing_from_wishlist",function(i){x()}),G(document).on("addonify_added_to_wishlist",function(i,t){t.hasOwnProperty("productID")&&0<(t=G("button[data-product_id="+t.productID+"]")).length&&t.each(function(){var i=G(this);i.addClass("added-to-wishlist"),!i.hasClass("addonify-custom-wishlist-btn")&&i.hasClass("addonify-add-to-wishlist-btn")&&(i.find("span.addonify-wishlist-btn-label").text(H),i.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"))}),R()}),G(document).on("addonify_removed_from_wishlist",function(i,t){t.hasOwnProperty("productID")&&0<(t=G("[data-product_id="+t.productID+"]")).length&&t.each(function(){var i=G(this);!i.hasClass("addonify-custom-wishlist-btn")&&i.hasClass("addonify-add-to-wishlist-btn")&&(i.find("span.addonify-wishlist-btn-label").text(J),i.find("i.icon.adfy-wishlist-icon").addClass("heart-o-style-one").removeClass("heart-style-one"))}),R()})},undoEventsHandler:function(){o.on("click","#addonify-wishlist-undo-deleted-product-link",function(i){i.preventDefault(),C(G(this))}),G(document).on("addonify_wishlist_undo_notice_set",function(i){clearTimeout(n),0<parseInt(_)&&(n=setTimeout(function(){t.html("")},1e3*parseInt(_)))})},addedToCartEventHandler:function(){G(document).on("added_to_cart",function(i,t,o,s){"1"===f&&W(s)})},toggleBackgroundOverlays:function(){o.on("click","#addonify-wishlist-close-modal-btn, #addonify-wishlist-modal-overlay",function(){o.toggleClass("addonify-wishlist-modal-is-open")}),o.on("click","#addonify-wishlist-show-sidebar-btn, #close-adfy-wishlist-sidebar-button, #addonify-wishlist-sticky-sidebar-overlay",function(){o.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")})}}.init()})}(jQuery);