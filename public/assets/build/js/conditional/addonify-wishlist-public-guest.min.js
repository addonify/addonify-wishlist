!function(G){"use strict";G(document).ready(function(){let s=G("body"),t=G("#addonify-wishlist-notice"),o,n="addonify-wishlist",e="Default Wishlist",{requireLogin:i,ajax_url:d,nonce:a,removeAlreadyAddedProductFromWishlist:l,removeFromWishlistAfterAddedToCart:r,afterAddToWishlistAction:h,wishlistPageURL:c,initialWishlistContentGetAction:f,guestAddToWishlistAction:u,guestRemoveFromWishlistAction:w,addedToWishlistText:y,undoNoticeTimeout:p,initialAddToWishlistButtonLabel:m,thisSiteUrl:_,loader:g,addedToWishlistModal:b,alreadyInWishlistModal:S,errorAddingToWishlistModal:R,errorRemovingFromWishlistModal:N,removedFromWishlistModal:H,isLoginRequired:J,loginRequiredModal:M,ifNotLoginAction:B,loginURL:q,saveForLaterButtonLabel:U,savedForLaterButtonLabel:v}=addonifyWishlistJSObject;function C(i){G(document).trigger("addonify_adding_to_wishlist");var s=parseInt(i.data("product_id")),t=A();if(-1===t.indexOf(s))if(t.push(s),!1!==T(t)){let t=A();"redirect_to_wishlist_page"===h&&i.hasClass("addonify-add-to-wishlist-btn")&&(window.location.href=c),G(document).trigger("addonify_added_to_wishlist",[{productID:s,itemsCount:t.length}]),"show_popup_notice"===h&&i.hasClass("addonify-add-to-wishlist-btn")&&E(b,i.data("product_name")),G.post(d,{action:u,product_ids:JSON.stringify(t),nonce:a},function(i){i.success?(i.itemsCount=t.length,D(i,"added_to_wishlist")):i.hasOwnProperty("error")&&"e1"===i.error&&console.log(i.message)})}else E(R,i.data("product_name"));else l&&W(i)}function O(){L();let t=A();G.post(d,{action:f,product_ids:JSON.stringify(t),nonce:a},function(i){i.success?(i.hasOwnProperty("tableContent")&&G("#addonify-wishlist-page-items-wrapper").html(i.tableContent),i.hasOwnProperty("sidebarContent")&&(G("#addonify-wishlist-sidebar-items-wrapper").html(i.sidebarContent),0<t.length)&&G("#addonify-wishlist-show-sidebar-btn").removeClass("hidden")):i.hasOwnProperty("error")&&"e1"===i.error&&console.log(i.message)}).always(function(){F()})}function W(i,t=""){G(document).trigger("addonify_removing_from_wishlist");var s=parseInt(i.val()?i.val():i.data("product_id"));let o=A();-1!==o.indexOf(s)&&(o.splice(o.indexOf(s),1),!1!==T(o))?(o=A(),G.post(d,{action:w,product_ids:JSON.stringify(o),product_id:s,nonce:a},function(i){i.success?(i.itemsCount=o.length,D(i,"removed_from_wishlist",t)):i.hasOwnProperty("error")&&"e1"===i.error&&console.log(i.message)}),i.hasClass("addonify-wishlist-ajax-add-to-wishlist")&&E(H,i.data("product_name")),G(document).trigger("addonify_removed_from_wishlist",[{productID:s,itemsCount:o.length}])):E(N,i.data("product_name"))}function A(s=!1){s=s||e;let o=[],n=P(I(j("product_ids")));return n&&n.forEach(function(i,t){return"object"!=typeof i?(o=n,!1):i.name===s?(o=n[t].product_ids,!1):void 0}),o}function T(s,o=!1){o=o||e;let n=P(I(j("product_ids")));var i,t;n?(n.forEach(function(i,t){return"object"!=typeof i?(n=s,!1):i.name===o?(n[t].product_ids=s,!1):void 0}),k("product_ids",n)):(n=[],t=x(),i=(new Date).getTime(),t={id:t,name:o,visibility:"private",created_at:i,product_ids:s},n.push(t),k("product_ids",n),k("wishlist_id",x()+1))}function x(){var i=j("wishlist_id");return i?parseInt(i):0}function k(i,t){"object"==typeof t&&(t=JSON.stringify(t));var s=_;localStorage.setItem(n+"_"+s+"_"+i,t)}function I(i){let t;try{t=JSON.parse(i)}catch(i){return!1}return t}function j(i){var t=_;return localStorage.getItem(n+"_"+t+"_"+i)}function P(s){if(null===s||"object"!=typeof s)return!1;{let t=new Array;var i=Object.keys(s);return 0<i.length&&i.forEach(function(i){t[i]=s[i]}),t}}function D(i,t,s=""){0<i.itemsCount&&G("#addonify-wishlist-show-sidebar-btn").removeClass("hidden"),i.hasOwnProperty("sidebarContent")&&G("#addonify-wishlist-sidebar-items-wrapper")&&G("#addonify-wishlist-sidebar-items-wrapper").html(i.sidebarContent),i.hasOwnProperty("tableContent")&&G("#addonify-wishlist-page-items-wrapper")&&G("#addonify-wishlist-page-items-wrapper").html(i.tableContent),"removed_from_wishlist"===t&&""===s&&i.hasOwnProperty("undoContent")&&G("#addonify-wishlist-notice")&&(G("#addonify-wishlist-notice").html(i.undoContent),G(document).trigger("addonify_wishlist_undo_notice_set")),"added_to_wishlist"===t&&G("#addonify-wishlist-notice").html("")}function E(i,t){""!==t&&i.includes("{product_name}")&&(i=i.replace("{product_name}",t)),G("#addonify-wishlist-modal-wrapper").replaceWith(i),s.toggleClass("addonify-wishlist-modal-is-open")}function L(){0<G("#addonify-wishlist-sticky-sidebar-container").length&&G("#addonify-wishlist-sticky-sidebar-container").append(g),0<G("#addonify-wishlist-page-container").length&&G("#addonify-wishlist-page-container").append(g)}function F(){G("#addonify-wishlist_spinner")&&G("#addonify-wishlist_spinner").remove()}({init:function(){"1"!==i&&(A().forEach(function(i,t){i=G('.adfy-wishlist-btn[data-product_id="'+i+'"]');i.hasClass("addonify-custom-wishlist-btn")||(i.find("i").addClass("heart-style-one").removeClass("heart-o-style-one"),i.hasClass("addonify-wishlist-save-for-later")?i.find("span.addonify-wishlist-btn-label").text(v):i.find("span.addonify-wishlist-btn-label").text(y)),i.addClass("added-to-wishlist")}),O()),this.onAddToWishlist(),this.onRemoveFromWishlist(),this.addedToCartEventHandler(),this.toggleBackgroundOverlays(),this.wishlistEventHandler(),this.undoEventsHandler()},onAddToWishlist:function(){s.on("click",".addonify-wishlist-ajax-add-to-wishlist",function(i){if(i.preventDefault(),"1"===J){if("show_popup"===B)return void E(M);window.location.href=q}i=G(this);i.hasClass("added-to-wishlist")?"1"===l?W(i):E(S,i.data("product_name")):C(i),G("#addonify-wishlist-notice").html("")})},onRemoveFromWishlist:function(){G(document).on("click",".addonify-wishlist-ajax-remove-from-wishlist, .addonify-wishlist-remove-from-wishlist",function(i){i.preventDefault(),W(G(this))}),G(document).on("click","#addonify-wishlist__clear-all",function(){L(),!1!==T([])&&(O(),G(document).trigger("addonify_wishlist_emptied")),F()})},wishlistEventHandler:function(){G(document).on("addonify_adding_to_wishlist, addonify_removing_from_wishlist",function(i){L()}),G(document).on("addonify_added_to_wishlist",function(i,t){t.hasOwnProperty("productID")&&0<(t=G("button[data-product_id="+t.productID+"]")).length&&t.each(function(){var i=G(this);i.hasClass("added-to-wishlist")||i.addClass("added-to-wishlist"),!i.hasClass("addonify-custom-wishlist-btn")&&i.hasClass("addonify-add-to-wishlist-btn")&&(i.find("i.icon.adfy-wishlist-icon").removeClass("heart-o-style-one").addClass("heart-style-one"),i.hasClass("addonify-wishlist-save-for-later")?i.find("span.addonify-wishlist-btn-label").text(v):i.find("span.addonify-wishlist-btn-label").text(y))}),F()}),G(document).on("addonify_removed_from_wishlist",function(i,t){t.hasOwnProperty("productID")&&0<(t=G("[data-product_id="+t.productID+"]")).length&&t.each(function(){var i=G(this);i.hasClass("added-to-wishlist")&&i.removeClass("added-to-wishlist"),!i.hasClass("addonify-custom-wishlist-btn")&&i.hasClass("addonify-add-to-wishlist-btn")&&(i.find("i.icon.adfy-wishlist-icon").addClass("heart-o-style-one").removeClass("heart-style-one"),i.hasClass("addonify-wishlist-save-for-later")?i.find("span.addonify-wishlist-btn-label").text(U):i.find("span.addonify-wishlist-btn-label").text(m))}),F()})},undoEventsHandler:function(){s.on("click","#addonify-wishlist-undo-deleted-product-link",function(i){i.preventDefault(),C(G(this))}),G(document).on("addonify_wishlist_undo_notice_set",function(i){clearTimeout(o),0<parseInt(p)&&(o=setTimeout(function(){t.html("")},1e3*parseInt(p)))})},addedToCartEventHandler:function(){G(document).on("added_to_cart",function(i,t,s,o){"1"===r&&(o=o.parent().find(".addonify-wishlist-ajax-add-to-wishlist"),console.log(o),o.hasClass("added-to-wishlist"))&&W(o,"added-to-cart")})},toggleBackgroundOverlays:function(){s.on("click","#addonify-wishlist-close-modal-btn, #addonify-wishlist-modal-overlay",function(){s.toggleClass("addonify-wishlist-modal-is-open")}),s.on("click","#addonify-wishlist-show-sidebar-btn, #close-adfy-wishlist-sidebar-button, #addonify-wishlist-sticky-sidebar-overlay",function(){s.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")})}}).init()})}(jQuery);